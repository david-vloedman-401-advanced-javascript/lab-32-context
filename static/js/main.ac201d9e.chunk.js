(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{105:function(e,t,n){e.exports={modalHead:"modal_modalHead__ePqQ8",modal:"modal_modal__2bhYs"}},107:function(e,t,n){e.exports=n(221)},115:function(e,t){},117:function(e,t){},155:function(e,t){},156:function(e,t){},214:function(e,t,n){},221:function(e,t,n){"use strict";n.r(t);var a=n(0),l=n.n(a),c=n(102),r=n.n(c),o=n(16),i=n(17),u=n(20),s=n(18),m=n(21),d=n(54),p=n.n(d),h=n(28),f=n.n(h),E=l.a.createContext(),b=function(e){function t(e){var n;Object(o.a)(this,t),(n=Object(u.a)(this,Object(s.a)(t).call(this,e))).login=function(e){f.a.save("auth",e),n.setLoginState(!0)},n.logout=function(){f.a.remove("auth"),n.setLoginState(!1)},n.setLoginState=function(e){var t=f.a.load("auth");n.setState({token:t,loggedIn:e})};var a=new URLSearchParams(window.location.search),l=f.a.load("auth"),c=a.get("token")||l||null;return n.state={loggedIn:!!c,token:c,login:n.login,logout:n.logout},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return l.a.createElement(E.Provider,{value:this.state},this.props.children)}}]),t}(l.a.Component),g=n(5),v=n(55),j=n.n(v),O=n(103),C=function(){var e=Object(a.useState)(null),t=Object(g.a)(e,2),n=t[0],l=t[1],c=Object(a.useState)({}),r=Object(g.a)(c,2),o=r[0],i=r[1],u=Object(a.useState)(null),s=Object(g.a)(u,2),m=s[0],d=s[1],p=Object(a.useState)(!1),h=Object(g.a)(p,2),f=h[0],E=h[1];return Object(a.useEffect)(function(){!function(){var e=Object(O.a)(j.a.mark(function e(){var t,a;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:return E(!0),e.prev=3,n.options.headers={"Content-Type":"application/json"},e.next=7,fetch(n.url,n.options);case 7:return t=e.sent,e.next=10,t.json();case 10:a=e.sent,i(a),E(!1),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(3),d(e.t0);case 18:case"end":return e.stop()}},e,null,[[3,15]])}));return function(){return e.apply(this,arguments)}}()()},[n]),{request:l,response:o,error:m,isLoading:f}},S=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e?t:null},y=function(e){return l.a.Children.map(e.children,function(t){return l.a.cloneElement(t,{condition:e.condition})})},x=function(e){return S(e.condition,e.children)},k=function(e){return S(e.condition,e.children)},D=n(19),_=n(104),w=function(e){var t=Object(a.useState)({}),n=Object(g.a)(t,2),l=n[0],c=n[1];return{handleChange:function(e){e.persist(),c(function(t){return Object(_.a)({},t,Object(D.a)({},e.target.name,e.target.value))})},handleSubmit:function(t){t&&t.preventDefault(),e(l)},values:l}},T=function(e){var t=w(e.handleSubmit),n=t.handleChange,a=t.handleSubmit;return l.a.createElement(l.a.Fragment,null,l.a.createElement("h3",null,"Add Item"),l.a.createElement("form",{onSubmit:a},l.a.createElement("label",null,l.a.createElement("span",null,"To Do Item"),l.a.createElement("input",{name:"text",placeholder:"Add To Do List Item",onChange:n})),l.a.createElement("label",null,l.a.createElement("span",null,"Difficulty Rating"),l.a.createElement("input",{type:"range",min:"1",max:"5",name:"difficulty",onChange:n})),l.a.createElement("label",null,l.a.createElement("span",null,"Assigned To"),l.a.createElement("input",{type:"text",name:"assignee",placeholder:"Assigned To",onChange:n})),l.a.createElement("button",null,"Add Item")))},I=l.a.createContext();var N=function(e){var t=Object(a.useState)(!1),n=Object(g.a)(t,2),c=n[0],r=n[1],o=Object(a.useState)(5),i=Object(g.a)(o,2),u={hideCompleted:c,pageSize:i[0],setHideCompleted:r,setPageSize:i[1]};return l.a.createElement(I.Provider,{value:u},e.children)},L=function(e){return e.condition?e.children:null},H=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=!1,t={};try{t=this.context.token?p.a.verify(this.context.token,"supersecret"):{},e=this.context.loggedIn&&(!this.props.capability||t.capabilities.includes(this.props.capability))}catch(n){}return l.a.createElement(L,{condition:e},l.a.createElement("div",null,this.props.children))}}]),t}(l.a.Component);H.contextType=E;var A=H,P=function(e){var t=e.list||[],n=Object(a.useContext)(I),c=n.pageSize,r=[];return Object(a.useEffect)(function(){t.length<c&&r.push(t);for(var e=0;e<t.length;e+=c){var n=t.slice(e,e+c);r.push(n)}}),l.a.createElement("ul",null,l.a.createElement(k,{condition:!n.hideCompleted},t.filter(function(e){return!e.complete}).map(function(t){return l.a.createElement("li",{className:"complete-".concat(t.complete.toString()),key:t._id},l.a.createElement(A,{capability:"read"},l.a.createElement("span",{onClick:function(){return e.handleComplete(t._id)}},t.text)),l.a.createElement("button",{onClick:function(){return e.handleDetails(t._id)}},"Details"),l.a.createElement(A,{capability:"delete"},l.a.createElement("button",{onClick:function(){return e.handleDelete(t._id)}},"Delete")))})),l.a.createElement(k,{condition:n.hideCompleted},t.map(function(t){return l.a.createElement("li",{className:"complete-".concat(t.complete.toString()),key:t._id},l.a.createElement(A,{capability:"read"},l.a.createElement("span",{onClick:function(){return e.handleComplete(t._id)}},t.text)),l.a.createElement("button",{onClick:function(){return e.handleDetails(t._id)}},"Details"),l.a.createElement(A,{capability:"delete"},l.a.createElement("button",{onClick:function(){return e.handleDelete(t._id)}},"Delete")))})),l.a.createElement("button",{name:"displayCompleted",onClick:function(){return n.setHideCompleted(!n.hideCompleted)}},"Toggle Completed"),l.a.createElement(y,{condition:r.length>1},l.a.createElement(x,null,l.a.createElement("button",{name:"next"},"Next"))))},F=n(105),J=n.n(F),q=function(e){return l.a.createElement("div",{className:J.a.modal},l.a.createElement("div",null,l.a.createElement("header",null,l.a.createElement("span",{className:"title"},e.title),l.a.createElement("button",{onClick:e.close},"X")),l.a.createElement("div",null,e.children)))},z=function(e){var t=e.item||{};return l.a.createElement(q,{title:"To Do Item",close:e.handleDetails},l.a.createElement("div",{className:"todo-details"},l.a.createElement("header",{id:"modalHead"},l.a.createElement("span",null,"Assigned To: ",t.assignee),l.a.createElement("span",null,"Due: ",t.due)),l.a.createElement("div",{className:"item"},t.text)))},R=(n(214),"https://api-js401.herokuapp.com/api/v1/todo"),B=function(){var e=Object(a.useState)([]),t=Object(g.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(!1),o=Object(g.a)(r,2),i=o[0],u=o[1],s=Object(a.useState)({}),m=Object(g.a)(s,2),d=m[0],p=m[1],h=C(),f=h.request,E=h.response,b=(h.error,h.isLoading,Object(a.useContext)(I));Object(a.useEffect)(function(){document.title="".concat(n.filter(function(e){return!e.complete}).length," items to Complete")});var v=function(e){u(!i);var t=n.filter(function(t){return t._id===e})[0];p(t)},j=function(){f({url:R,options:{method:"get"}})};return Object(a.useEffect)(function(){j()},[]),Object(a.useEffect)(function(){E.count>=0?c(E.results):j()},[E]),l.a.createElement(l.a.Fragment,null,l.a.createElement(A,{capability:"read"},l.a.createElement("header",{className:"toDoHead"},l.a.createElement("h2",null,"There are ",n.filter(function(e){return!e.complete}).length," Items To Complete"))),l.a.createElement(A,null,l.a.createElement("section",{className:"todo"},l.a.createElement("div",null,l.a.createElement(A,{capability:"create"},l.a.createElement(T,{handleSubmit:function(e){var t={url:R,options:{method:"post",body:JSON.stringify(e)}};f(t)}}))),l.a.createElement("div",null,l.a.createElement(P,{list:n,context:b,handleComplete:function(e){var t=n.filter(function(t){return t._id===e})[0]||{};t.complete=!t.complete;var a={url:"".concat(R,"/").concat(e),options:{method:"put",body:JSON.stringify(t)}};f(a)},handleDelete:function(e){var t={url:"".concat(R,"/").concat(e),options:{method:"delete"}};f(t)},handleDetails:v})))),l.a.createElement(k,{condition:i},l.a.createElement(z,{handleDetails:v,item:d})))},Q=n(106),U=n.n(Q),X="https://api-js401.herokuapp.com",Y=function(e){return e.condition?e.children:null},G=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(u.a)(this,Object(s.a)(t).call(this,e))).handleChange=function(e){n.setState(Object(D.a)({},e.target.name,e.target.value))},n.handleSubmit=function(e){e.preventDefault(),U.a.post("".concat(X,"/signin")).auth(n.state.username,n.state.password).set("mode","cors").then(function(e){var t=e.text;n.context.login(t)}).catch(function(e){return console.error(e)})},n.state={username:"",password:""},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{id:"login"},l.a.createElement(Y,{condition:this.context.loggedIn},l.a.createElement("button",{onClick:this.context.logout},"Log Out ")),l.a.createElement(Y,{condition:!this.context.loggedIn},l.a.createElement("h1",{id:"loginH"},"Sign-in Todoodles"),l.a.createElement("form",{onSubmit:this.handleSubmit},l.a.createElement("input",{placeholder:"username",name:"username",onChange:this.handleChange}),l.a.createElement("input",{placeholder:"password",name:"password",onChange:this.handleChange}),l.a.createElement("input",{type:"submit",value:"login"})))))}}]),t}(l.a.Component);G.contextType=E;var K=G;function M(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(N,null,l.a.createElement(K,null),l.a.createElement(B,null)))}var V=document.getElementById("root");r.a.render(l.a.createElement(function(){return l.a.createElement(b,null,l.a.createElement(M,null))},null),V)}},[[107,1,2]]]);
//# sourceMappingURL=main.ac201d9e.chunk.js.map